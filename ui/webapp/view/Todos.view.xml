<mvc:View xmlns:mvc="sap.ui.core.mvc" xmlns="sap.m" xmlns:core="sap.ui.core"
          controllerName="todoapp.controller.Todos">
    <Page titleAlignment="Center">
        <customHeader>
            <Toolbar width="100%" height="3rem" design="Auto" sticky="HeaderToolbar">
                <Title text="Information about Todos:" level="H2" titleStyle="H3" wrapping="true" />

                <ToolbarSpacer />
                <core:Icon src="sap-icon://task" size="2rem" class="sapUiSmallMarginBegin" />
                <Text text="All Todos:" design="Emphasized" />
                <Text text="{= ${todos>/totalTasks} }" design="Emphasized" style="font-size: 1.5rem;" />

                <ToolbarSpacer width="1rem" />
                <core:Icon src="sap-icon://task" color="Positive" size="2rem" />
                <Text text="Completed Todos:" design="Emphasized" />
                <Text text="{= ${todos>/completedTasks} }" design="Emphasized" style="font-size: 1.5rem;" />

                <ToolbarSpacer width="1rem" />
                <core:Icon src="sap-icon://task" color="Negative" size="2rem" />
                <Text text="Uncompleted Todos:" design="Emphasized" />
                <Text text="{= ${todos>/totalTasks} - ${todos>/completedTasks} }" design="Emphasized" style="font-size: 1.5rem;" />
            </Toolbar>

        </customHeader>


        <content>
            <VBox width="100%" height="100%">
            <Toolbar height="7rem" design="Auto" sticky="HeaderToolbar">
                <Text text="Search by Title:" />
                <Input id="titleSearch"
                       placeholder="Enter title"
                       liveChange="onTitleSearchChange"
                        width="200px"/>
                <Text text="Search by List Name:" class="sapUiSmallMarginStart"/>
                <Input id="listNameSearch"
                       placeholder="Enter list name"
                       liveChange="onListNameSearchChange"
                       width="200px" />
                <Text text="Filter by Priority:" />
                <Select id="priorityFilter" change="onPriorityChange">
                    <items>
                        <core:Item key="None" text="All" />
                        <core:Item key="High" text="High" />
                        <core:Item key="Medium" text="Medium" />
                        <core:Item key="Low" text="Low" />
                    </items>
                </Select>

                <Text text="Filter by Status:" class="sapUiSmallMarginStart"/>
                <Select id="completedFilter" change="onCompletedChange">
                    <items>
                        <core:Item key="None" text="All" />
                        <core:Item key="Completed" text="Completed" />
                        <core:Item key="Uncompleted" text="Uncompleted" />
                    </items>
                </Select>
                <ToolbarSpacer />
                <OverflowToolbarButton icon="sap-icon://decline" type="Transparent" press="onClearFiltersPress"/>
            </Toolbar>
            <Table
                    id="todosTable"
                    items="{todos>/data}"
                    width="100%"
                    layoutData="sap.m.FlexItemData"
                    sticky="HeaderToolbar,ColumnHeaders"
                    growing="true"
                    growingThreshold="20">
                <columns>
                    <Column width="30%">
                        <Text text="Todo Title"/>
                    </Column>
                    <Column width="30%">
                        <Text text="Part of list"/>
                    </Column>
                    <Column width="10%">
                        <Text text="Priority"/>
                    </Column>
                    <Column width="8%">
                        <Text text="Completed"/>
                    </Column>
                    <Column width="22%" hAlign="End">
                        <Text text="Actions" class="sapUiSmallMarginStart"/>
                    </Column>
                </columns>
                <items>
                    <ColumnListItem>
                        <cells>
                            <Label text="{todos>title}" textAlign="Center"/>
                            <Label text="{todos>list/name}" textAlign="Center"/>
                            <Label text="{todos>priority}" textAlign="Center"/>
                            <Label text="{ path: 'todos>completed', formatter: '.isCompleted'}" textAlign="Center"/>
                            <HBox alignItems="End" justifyContent="End">
                                <Button icon="sap-icon://complete" text="Complete"
                                        type="Transparent"
                                        class="sapUiTinyMargin"
                                        press="onCompletePress"
                                        visible="{path: 'todos>completed', formatter: '.isTodoCompleted'}"/>

                                <Button icon="sap-icon://edit" text="Edit"
                                        type="Transparent" press="onEditPress"
                                        class="sapUiTinyMargin"
                                        visible="{path: 'todos>/data', formatter: '.formatter.hasWriterAdminPer'}"/>
                                <Button
                                        icon="sap-icon://delete"
                                        type="Transparent"
                                        text="Delete"
                                        class="sapUiTinyMargin"
                                        press="onDeleteTodo"
                                        visible="{path: 'todos>/data', formatter: '.formatter.hasWriterAdminPer'}"/>
                            </HBox>
                        </cells>
                    </ColumnListItem>
                </items>
            </Table>
            </VBox>
        </content>
    </Page>
</mvc:View>
